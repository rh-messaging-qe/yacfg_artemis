_defaults: &artemis_profile_defaults
  java_xms: 4G
  java_xms: 4G

artemis_profile:
  home: '{{ broker_home }}'
  instance: '{{ broker_instance }}'
  data_dir: '{{ broker_instance }}/data'
  instance_uri: 'file:{{ broker_instance }}'
  instance_etc_uri: 'file:{{ broker_instance }}/etc/'
  java_args:
  - -XX:+PrintClassHistogram
  - -XX:+UseG1GC
  - -XX:+AggressiveOpts
  - -XX:+PrintSafepointStatistics
  - -XX:PrintSafepointStatisticsCount=1
  - -XX:+LogVMOutput
  - -XX:LogFile='{{ broker_instance }}/log/jvm-pauses.log'
  - -Xms{{ java_xms }}
  - -Xmx{{ java_xmx }}
  - -Dhawtio.realm=activemq
  - -Dhawtio.offline="true"
  - -Dhawtio.role=amq
  - -Dhawtio.rolePrincipalClasses=org.apache.activemq.artemis.spi.core.security.jaas.RolePrincipal
  - -Djolokia.policyLocation=${ARTEMIS_INSTANCE_ETC_URI}jolokia-access.xml
  java_args_run:
  - -Dcom.sun.management.jmxremote=true
  - -Dcom.sun.management.jmxremote.port=1099
  - -Djava.rmi.server.hostname={{ hostname }}
  - -Dcom.sun.management.jmxremote.rmi.port=1098
  - -Dcom.sun.management.jmxremote.authenticate=false
